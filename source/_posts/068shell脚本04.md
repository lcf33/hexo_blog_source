---
title: 068shell脚本04
date: 2017-11-13
tags:
- tech
- Linux
---

shell中的函数
shell中的数组
告警系统需求分析

<!--more-->

## shell函数
函数就是把一段代码整理到了一个小单元中，并给这个小单元起一个名字，当用到这段代码时直接调用这个小单元的名字即可。
格式:
```
function f_name() &#123
	command
&#125
```
函数必须要放在最前面，function可以省略。

示例1
```
#!/bin/bash
input() &#123
	echo $1 $2 $# $0
&#125

input 1 a b
```

示例2
```
#!/bin/bash
sum() &#123
	s=$[$1+$2]
	echo $s
&#125
sum 1 2
```

示例3
```
#!/bin/bash
ip() &#123
	ifconfig |grep -A1 "$1"|tail -1 |awk '&#123print $2&#125'|awk -F':' '&#123print $2&#125'
&#125
read -p "Please input the eth name: " e
myip=`ip $e`
echo "$e address is $myip"
```

## 数组
定义数组 `a=(1 2 3 4 5);echo $&#123a[@]&#125`
`echo $&#123#a[@]&#125` 获取数组的元数个数
`echo $&#123a[2]&#125` 读取第三个元素，数组从0开始
`echo $&#123a[*]&#125` 等同于`$&#123a[@]&#125` 显示整个数组
数组赋值
`a[1]=100;echo $&#123a[@]&#125`
`a[5]=2;echo $&#123a[@]&#125` 如果下标不存在则会自动添加一个元素
数组删除
`unset a;unset a[1]`

数组分片
```
a=(`seq 1 5`)
echo $&#123a[@]:0:3&#125 从第一个元素开始，截取3个
echo $&#123a[@]:1:4&#125 从第二个元素开始，截取4个
echo $&#123a[@]:0-3:2&#125 从倒数第三个元素开始，截取2个
```
数组替换
```
echo $&#123a[@]/3/100&#125
a=($&#123a[@]/3/100&#125)
```
