---
title: 019linux下压缩文件02
date: 2017-08-07
tags:
- tech
- Linux
---

zip压缩工具
tar打包
打包并压缩

<!--more-->

## zip
上一篇介绍的gzip、bzip2、xz都只能压缩单个文件，但日常需要压缩多个文件到一个压缩包，在linux下一般先用tar打包再用前面说的三个工具压缩。或者使用zip、7z工具。

zip支持压缩目录。如果不能解压缩windows下的zip压缩包，那就要安装插件。

`zip  1.txt.zip 1.txt` ，zip后紧跟压缩包名，再后面是需要压缩的文件。可以压缩多个文件或目录，用空格隔开依次列出即可。如果要压缩目录，记得加-r参数：`zip -r dir.zip dir`。zip压缩后保留原文件。
zip还常用到几个更新参数：-d：从压缩文件内删除指定的文件；-u：更换较新的文件到压缩文件内；

unzip解压缩，-d指定目录。`unzip -l`可以查看压缩包内有什么文件，但zip没有gzcat类似的命令来查看文件内容。
unzip解压需要注意几个问题：1，解压到那个目录，这个用-d 指定路径 （-d 是一个option，后面跟路径，然后才是解压目标）。2，解压的路径下是否有同名文件，是否覆盖。不带参数的话命令会询问你怎么操作，-n为不覆盖、-o为覆盖（可以不记这两，让命令提示就挺好用）。 3，查看压缩包内文件使用 -l 参数。 4，如果要解压压缩包中指定文件，使用`unzip file.zip "oneFile"`的格式。

## tar
tar用来打包，多个文件打包后成为一个大包裹，有利于文件传输。`tar -cvf dir.tar file1 file2 dir1`就创建了一个dir.tar包，内含file1、file2、dir1。

常用参数有：
- -c：创建包
- -v：可视化，即打包、解包时在终端显示操作细节
- -f：文件名，紧跟包名
- -x：解包，使用-C 指定解压后的路径 
- -t：查看包里面包含的文件
- --exclude：过滤指定文件或目录，比如打包时指定不包含某些文件

tar工具在打包同时支持压缩：
- -z：gzip
- -j：bzip2
- -J：xz

比如`tar -czvf dir.tar.gz dir1 dir2`这条命令将dir1、dir2目录打包压缩为dir.tar.gz。解包也可以用tar，-C参数指定解压到某目录。
